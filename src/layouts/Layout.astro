---
import "@fontsource/poppins/100.css";
import "@fontsource/poppins/200.css";
import "@fontsource/poppins/300.css";
import "@fontsource/poppins/400.css";
import "@fontsource/poppins/500.css";
import "@fontsource/poppins/600.css";
import "@fontsource/poppins/700.css";
import "@fontsource/poppins/800.css";
import "@fontsource/poppins/900.css";
import poppins400 from "@fontsource/poppins/files/poppins-latin-400-normal.woff2";
import poppins600 from "@fontsource/poppins/files/poppins-latin-600-normal.woff2";
import poppins700 from "@fontsource/poppins/files/poppins-latin-700-normal.woff2";
// import "@splidejs/splide/css";
import "@splidejs/svelte-splide/css";
import { Image } from "astro:assets";

interface Props {
	title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="es">
	<head>
		<meta charset="UTF-8" />
		<title>{title}</title>
		<meta
			name="description"
			content="Encuentra el mejor lugar para vivir | Una pagina hecha con fines educativos"
		/>
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />

		<link
			rel="preload"
			as="image"
			href="/principal-image.avif"
			type="image/avif"
		/>

		<link
			rel="preload"
			href={poppins400}
			as="font"
			type="font/woff2"
			crossorigin
		/>
		<link
			rel="preload"
			href={poppins600}
			as="font"
			type="font/woff2"
			crossorigin
		/>
		<link
			rel="preload"
			href={poppins700}
			as="font"
			type="font/woff2"
			crossorigin
		/>

		<meta name="generator" content={Astro.generator} />
	</head>

	<body>
		<header
			class="singulart-header sticky top-0 border-b border-b-white bg-primary z-40"
		>
			<div class="container flex justify-between py-5">
				<a href="#">
					<Image
						src="/logo-singulart.avif"
						alt="Singulart"
						width={193}
						height={54}
						class="w-32 h-auto md:w-auto"
					/>
				</a>

				<nav class="flex items-center">
					<ul class="flex items-center justify-end gap-6">
						<li class="hidden md:block">
							<a href="#banner" class="button-link"> Inicio</a>
						</li>
						<li class="hidden md:block">
							<a href="#video" class="button-link"> Video</a>
						</li>
						<li class="hidden md:block">
							<a href="#galeria" class="button-link"> Fotografía</a>
						</li>
						<li class="hidden md:block">
							<a href="#ubicacion" class="button-link"> Ubicación</a>
						</li>

						<li>
							<a
								href="#contacto"
								class="bg-secondary px-4 py-2 text-white rounded-full button-link"
							>
								Contacto
							</a>
						</li>

						<li class="gap-2 items-center hidden md:flex">
							<a
								href="#"
								target="_blank"
								aria-label="Facebook"
								class="bg-white w-10 h-10 flex items-center justify-center text-primary text-xl hover:shadow-xl rounded-full ease-in-out duration-300"
							>
								<i class="icon-[vaadin--facebook]"></i>
							</a>
							<a
								href="#"
								target="_blank"
								aria-label="Instagram"
								class="bg-white w-10 h-10 flex items-center justify-center text-primary text-xl hover:shadow-xl rounded-full ease-in-out duration-300"
							>
								<i class="icon-[bi--instagram]"></i>
							</a>
							<a
								href="#"
								target="_blank"
								aria-label="Youtube"
								class="bg-white w-10 h-10 flex items-center justify-center text-primary text-xl hover:shadow-xl rounded-full ease-in-out duration-300"
							>
								<i class="icon-[bi--youtube]"></i>
							</a>
							<a
								href="https://github.com/oswaldohuillca/singulart-apartments"
								target="_blank"
								aria-label="Github"
								class="bg-white w-10 h-10 flex items-center justify-center text-primary text-2xl hover:shadow-xl rounded-full ease-in-out duration-300"
							>
								<i class="icon-[ri--github-fill]"></i>
							</a>
						</li>
					</ul>
				</nav>
			</div>
		</header>

		<slot />

		<footer class="bg-secondary text-white py-4">
			<main class="container">
				<ul class="flex flex-col md:flex-row gap-4 items-center">
					<!-- <li>Derechos reservados © 2024</li> -->
					<li class="flex item-center gap-2">
						<a
							href="#"
							target="_blank"
							aria-label="Facebook"
							class="bg-white w-10 h-10 flex items-center justify-center text-primary text-xl hover:shadow-xl rounded-full ease-in-out duration-300"
						>
							<i class="icon-[vaadin--facebook]"></i>
						</a>
						<a
							href="#"
							target="_blank"
							aria-label="Instagram"
							class="bg-white w-10 h-10 flex items-center justify-center text-primary text-xl hover:shadow-xl rounded-full ease-in-out duration-300"
						>
							<i class="icon-[bi--instagram]"></i>
						</a>
						<a
							href="#"
							target="_blank"
							aria-label="Youtube"
							class="bg-white w-10 h-10 flex items-center justify-center text-primary text-xl hover:shadow-xl rounded-full ease-in-out duration-300"
						>
							<i class="icon-[bi--youtube]"></i>
						</a>
						<a
							href="https://github.com/oswaldohuillca/singulart-apartments"
							target="_blank"
							aria-label="Github"
							class="bg-white w-10 h-10 flex items-center justify-center text-primary text-2xl hover:shadow-xl rounded-full ease-in-out duration-300"
						>
							<i class="icon-[ri--github-fill]"></i>
						</a>
					</li>
					<li>
						<a href="#" class="font-semibold"> Legal promociones</a>
					</li>
				</ul>
			</main>
		</footer>

		<span
			class="fixed bottom-6 right-5 text-base md:text-5xl text-white font-bold bg-secondary/20 backdrop-blur-3xl p-4 rounded-2xl z-[100] uppercase pointer-events-none"
		>
			unofficial
		</span>
	</body>
</html>

<style is:global>
	html {
		font-family: "Poppins";
		scroll-behavior: smooth;
	}

	@keyframes add-blur {
		to {
			@apply backdrop-blur-sm bg-primary/90;
		}
	}

	header {
		animation: add-blur linear both;
		animation-timeline: scroll();
		animation-range: 0 500px;
	}
</style>

<script>
	const navItems = document.querySelectorAll("nav .button-link");
	const sections = document.querySelectorAll("section");

	const observer = new IntersectionObserver(
		(entries) => {
			entries.forEach((entry) => {
				if (entry.isIntersecting) {
					const id = entry.target.getAttribute("id");
					if (!id) return;
					const navAnchor = document.querySelector(`[href="#${id}"]`);
					navAnchor?.classList.add("font-bold");
				} else {
					navItems.forEach((nav) => nav.classList.remove("font-bold"));
				}
			});
		},
		{
			rootMargin: "30% 30% 0% 0%",
			threshold: 0.8,
		},
	);

	sections.forEach((section) => observer.observe(section));
</script>
